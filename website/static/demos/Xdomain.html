<html>
<!-- This is Julien Couvreur's Flash4Ajax demo page redone in Flapjax -->
<head>
<title>Cross-domain with Flash 8 and Flapjax</title>

<script type="text/javascript" src="../fx/flapjax.js"></script>
<script type="text/javascript" src="../fx/fxws.js"></script>

<script type="text/javascript">

function makeRequest(req) {
  return {
    url: req.url,
    body: req.body,
    request: 'rawPost',
    response 'plaintext',
    asynchronous: true
  };
};

function loader() {
  initFlapjaxForeignWSO('../fx');
  
  var requestInfo = liftB(function (url,body) { return { url: url, body: body }; },$B('url'),$B('body'));
  
  var response = 
    getForeignWebServiceObjectE(extractEventE($('requestButton'),'click').snapshot(requestInfo).mapE(makeRequest));
  
  response.insertValueE($('response'),'value');
    
}
  
</script>

</head>

<body onload="javascript:loader()">

<p>This page is derived from Julien Couvreur's Flash4Ajax <a
href="http://blog.monstuff.com/Flash4AJAX/static/Xdomain.html">demo page</a>. Flapjax uses the <a
href="http://blog.monstuff.com/archives/000280.html">Flash4Ajax</a> <tt>.swf</tt> and a derivative of the supporting
JavaScript code for cross-domain requests.</p>

<form action="javascript:undefined">
URL: <input type="text" id="url" value="http://search.yahooapis.com/ImageSearchService/V1/imageSearch?appid=YahooDemo&query=Madonna&results=2&output=json" size="100"/><br />
Verb: <b>POST</b><br />
Body: <textarea id="body" rows="10" cols="100"></textarea><br />
Content Type: <b>application/x-www-form-urlencoded</b><br />
<button id="requestButton" value="Make HTTP request (FlashXMLHttpRequest)">
  Make HTTP request (FlashXMLHttpRequest)</button><br />

<br />
<br />
<textarea id="response" rows="20" cols="100"></textarea><br />

</form>

</body>
</html>
